"use strict";

/**
 * @name responsive
 * @author JungHyunKwon
 * @since 2017-11-03
 * @version 1.0
 */
try{if(this.jQuery=this.jQuery||void 0,!jQuery)throw"제이쿼리가 없습니다.";!function($){function _typeOf(e){var t="";return t=void 0===e?"undefined":"number"==typeof e&&isNaN(e)?"NaN":Object.prototype.toString.call(e).toLowerCase().replace("[object ","").replace("]","")}function _freeObject(e){var t={};return"object"==_typeOf(e)&&(t=_JSON.parse(_JSON.stringify(e))),t}function _getConnectedState(){var e=navigator.userAgent.toLowerCase(),t=navigator.platform.toLowerCase(),o=["win16","win32","win64","mac","linux"],n={browser:"",platform:""};return e.indexOf("msie 7.0")>-1?n.browser="ie7":e.indexOf("msie 8.0")>-1?n.browser="ie8":e.indexOf("msie 9.0")>-1?n.browser="ie9":e.indexOf("msie 10.0")>-1?n.browser="ie10":e.indexOf("trident/7.0")>-1?n.browser="ie11":e.indexOf("edge")>-1?n.browser="edge":e.indexOf("opr")>-1?n.browser="opera":e.indexOf("chrome")>-1?n.browser="chrome":e.indexOf("firefox")>-1?n.browser="firefox":e.indexOf("safari")>-1?n.browser="safari":n.browser="unknown",$.inArray(t,o)>-1?n.platform="pc":n.platform="mobile",n}function _removeDuplicate(e){var t=[],o=_typeOf(e);"string"==o||"number"==o||"boolean"==o?e=$.makeArray(e):"array"!=o&&(e=[]);for(var n=0;n<e.length;n++)-1==$.inArray(e[n],t)&&t.push(e[n]);return t}var _$target=$("html"),_$window=$(window),_connectedState=_getConnectedState(),_setting={},_JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)},o={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},n=function(e){return o[e]||"\\u"+(e.charCodeAt(0)+65536).toString(16).substr(1)},i=/[\\"\u0000-\u001F\u2028\u2029]/g;return function r(o){if(null==o)return"null";if("number"==typeof o)return isFinite(o)?o.toString():"null";if("boolean"==typeof o)return o.toString();if("object"==typeof o){if("function"==typeof o.toJSON)return r(o.toJSON());if(t(o)){for(var s="[",a=0;a<o.length;a++)s+=(a?", ":"")+r(o[a]);return s+"]"}if("[object Object]"===e.call(o)){var p=[];for(var l in o)o.hasOwnProperty(l)&&p.push(r(l)+" : "+r(o[l]));return"{"+p.join(", ")+"}"}}return'"'+o.toString().replace(i,n)+'"'}}()};$(function(){function _hasScrollbar(e){var t=$(e).first(),o=t.add(t.parents()),n=[],i=[],r={horizontal:!1,vertical:!1};return o.each(function(e,t){var o=$(t),r={x:o.css("overflow-x"),y:o.css("overflow-y")};t.scrollWidth>t.clientWidth&&"hidden"!=r.x||"scroll"==r.x?n.push(!0):n.push(!1),t.scrollHeight>t.clientHeight&&"hidden"!=r.y||"scroll"==r.y?i.push(!0):i.push(!1)}),$.inArray(!0,n)>-1&&(r.horizontal=!0),$.inArray(!0,i)>-1&&(r.vertical=!0),r}function _getScrollbarWidth(){var e=$("body"),t=e.children("#responsive_scrollbar"),o='<div id="responsive_scrollbar" style="visibility:hidden; overflow-x:scroll; overflow-y:scroll; position:absolute; top:-100px; left:-100px; z-index:-1; width:100px; height:100px;">&nbsp;</div>',n=t.length?t[0].outerHTML.toLowerCase():"",i=t.length?t[0].offsetWidth-t[0].clientWidth:0;return o!=n&&(t.remove(),e.append(o),_getScrollbarWidth()),i}function _getDefaultObject(){var e=_hasScrollbar(_$target[0]),t=_getScrollbarWidth(),o=e.vertical?_$window.width()+t:_$window.width(),n=e.horizontal?_$window.height()+t:_$window.height(),i={isRun:!1,range:{},exit:[],lowIE:{},nowState:[],prevState:[],scrollbarWidth:t,screenWidth:o,screenHeight:n,screenLoadedWidth:o,screenLoadedHeight:n,browser:_connectedState.browser,platform:_connectedState.platform,hasVerticalScrollbar:e.vertical,hasHorizontalScrollbar:e.horizontal,isLowIE:"ie7"==_connectedState.browser||"ie8"==_connectedState.browser,isResize:!1,isScreenChange:!1,isScreenWidthChange:!1,isScreenHeightChange:!1,isScreenWidthAndHeightChange:!1};return _freeObject(i)}function _setState(e){var t=!1,o=[],n=[];e=_removeDuplicate(e);for(var i=0;i<e.length;i++)-1==$.inArray(e[i],_setting.nowState)?o.push(e[i]):n.push(e[i]);return(o.length||n.length!=_setting.nowState.length)&&(t=!0),t&&(_$target.removeClass(_setting.nowState.join(" ")),_$target.addClass(e.join(" ")),_setting.prevState=_setting.nowState,_setting.nowState=e,console.log("현재상태 : "+e.join(", "))),_callEvent((e.join("All, ")+"All").split(", ")),t&&_callEvent(o),t}function _callEvent(e){var t={setting:_freeObject(_setting)};e=_removeDuplicate(e),$.responsive.setting=t.setting;for(var o=0;o<e.length;o++)t.state=e[o],_$window.triggerHandler($.Event("responsive",t)),_$window.triggerHandler($.Event("responsive:"+e[o],t));return e}function _setScreenInfo(){var e=_hasScrollbar(_$target[0]);return _setting.hasVerticalScrollbar=e.vertical,_setting.hasHorizontalScrollbar=e.horizontal,_setting.isResize=!1,_setting.isScreenWidthChange=!1,_setting.isScreenHeightChange=!1,_setting.isScreenWidthAndHeightChange=!1,_setting.isScreenChange=!1,_setting.scrollbarWidth=_getScrollbarWidth(),_setting.scrollbarWidth?_$target.addClass("scrollbar"):_$target.removeClass("scrollbar"),_setting.screenWidth=_$window.width(),_setting.screenHeight=_$window.height(),_setting.hasVerticalScrollbar&&(_setting.screenWidth+=_setting.scrollbarWidth),_setting.hasHorizontalScrollbar&&(_setting.screenHeight+=_setting.scrollbarWidth),_setting}$.responsive=function(option){_setting.nowState&&_setting.nowState.length&&_$target.removeClass(_setting.nowState.join(" ")),_setting=_getDefaultObject(),_setting.isRun=!0,_$target.addClass(_setting.browser+" "+_setting.platform),"object"!=_typeOf(option)&&(option={}),"object"!=_typeOf(option.lowIE)&&(option.lowIE={}),option.lowIE.propertyType=_typeOf(option.lowIE.property),"array"==option.lowIE.propertyType||"string"==option.lowIE.propertyType?option.lowIE.property=_removeDuplicate(option.lowIE.property):option.lowIE.property=[],option.interval=250,"object"!=_typeOf(option.range)&&(option.range={}),option.rangeCode="option.enter = [];\n_setting.exit = [];\n\n",option.rangeCode+="if(!_setting.lowIE.run && _setting.isLowIE) {\n	option.enter = _setting.lowIE.property;\n}else{\n",option.range.property=[];for(option.i in option.range)"property"!=option.i&&"All"!=option.i.substr(-3)&&"Resized"!=option.i.substr(-7)&&"none"!=option.i&&"all"!=option.i.substr(-3)&&"mobile"!=option.i&&"pc"!=option.i&&"scrollbar"!=option.i&&"ie7"!=option.i&&"ie8"!=option.i&&"ie9"!=option.i&&"ie10"!=option.i&&"ie11"!=option.i&&"edge"!=option.i&&"opera"!=option.i&&"chrome"!=option.i&&"firefox"!=option.i&&"safari"!=option.i&&"unknown"!=option.i&&(option.range.property.push(option.i),"object"!=_typeOf(option.range[option.i])&&(option.range[option.i]={}),option.rangeCode+="	if(",option.isHorizontal="object"==_typeOf(option.range[option.i].horizontal),option.isHorizontal&&("number"!=_typeOf(option.range[option.i].horizontal.from)&&(option.range[option.i].horizontal.from=9999),"number"!=_typeOf(option.range[option.i].horizontal.to)&&(option.range[option.i].horizontal.to=0),option.rangeCode+="_setting.screenWidth <= "+option.range[option.i].horizontal.from+" && _setting.screenWidth >= "+option.range[option.i].horizontal.to),"object"==_typeOf(option.range[option.i].vertical)&&("number"!=_typeOf(option.range[option.i].vertical.from)&&(option.range[option.i].vertical.from=9999),"number"!=_typeOf(option.range[option.i].vertical.to)&&(option.range[option.i].vertical.to=0),option.isHorizontal&&(option.rangeCode+=" && "),option.rangeCode+="_setting.screenHeight <= "+option.range[option.i].vertical.from+" && _setting.screenHeight >= "+option.range[option.i].vertical.to),option.rangeCode+=") {\n",option.rangeCode+='		option.enter.push("'+option.i+'");\n',option.rangeCode+="	}else{\n",option.rangeCode+='		_setting.exit.push("'+option.i+'");\n',option.rangeCode+="	}\n\n");for(option.rangeCode=option.rangeCode.replace(/\n$/,""),option.rangeCode+="}",_setting.range=option.range,option.i=0,option.filter=[];option.i<option.lowIE.property.length;option.i++)$.inArray(option.lowIE.property[option.i],option.range.property)>-1&&option.filter.push(option.lowIE.property[option.i]);return option.filter.length?option.lowIE.run=!1:option.lowIE.run=!0,option.lowIE.property=option.filter,delete option.lowIE.propertyType,_setting.lowIE=option.lowIE,_$window.off("resize.responsive").on("resize.responsive",function(event){_setScreenInfo(),_setting.isResize=!0,_setting.screenWidth!=option.screenWidth&&(option.screenWidth=_setting.screenWidth,_setting.isScreenWidthChange=!0),_setting.screenHeight!=option.screenHeight&&(option.screenHeight=_setting.screenHeight,_setting.isScreenHeightChange=!0),_setting.isScreenWidthChange&&_setting.isScreenHeightChange&&(_setting.isScreenWidthAndHeightChange=!0),(_setting.isScreenWidthChange||_setting.isScreenHeightChange)&&(_setting.isScreenChange=!0),option.init||(_setting.isResize=!1,_setting.isScreenWidthChange=!1,_setting.isScreenHeightChange=!1,_setting.isScreenWidthAndHeightChange=!1,_setting.isScreenChange=!1),(_setting.isScreenChange||!option.init)&&(_callEvent("all"),eval(option.rangeCode),_setState(option.enter.length?option.enter:"none"),option.timer&&(clearTimeout(option.timer),option.timer=0),option.timer=setTimeout(function(){_setScreenInfo(),_callEvent("allResized"),_callEvent(option.enter.length?(option.enter.join("AllResized, ")+"AllResized").split(", "):"noneAllResized")},option.interval)),option.init=!0}).triggerHandler("resize.responsive"),_$target},$.responsive.destroy=function(){var e=!1;return _setting.isRun&&(_$window.off("resize.responsive"),_$target.removeClass("scrollbar "+_setting.browser+" "+_setting.platform+" "+_setting.nowState.join(" ")),_setting.isRun=!1,$("body > #responsive_scrollbar").remove(),this.setting=void 0,e=!0),e},$.responsive.setting=_getDefaultObject()})}(jQuery)}catch(e){console.error(e)}