"use strict";

/**
 * @name responsive
 * @author JungHyunKwon
 * @since 2017-11-03
 * @version 1.0
 */
try{if(!jQuery)throw"제이쿼리가 없습니다.";!function($){function _typeOf(e){var n=Object.prototype.toString.call(e).toLowerCase().replace("[object ","").replace("]","");return void 0==e&&(n="undefined"),n}function _freeObject(e){var n={};return"object"==_typeOf(e)&&(n=_JSON.parse(_JSON.stringify(e))),n}function _getConnectedState(){var e=navigator.userAgent.toLowerCase(),n=navigator.platform.toLowerCase(),r=["win16","win32","win64","mac","linux"],i={browser:"",platform:""};return e.indexOf("msie 7.0")>-1?i.browser="ie7":e.indexOf("msie 8.0")>-1?i.browser="ie8":e.indexOf("msie 9.0")>-1?i.browser="ie9":e.indexOf("msie 10.0")>-1?i.browser="ie10":e.indexOf("trident/7.0")>-1?i.browser="ie11":e.indexOf("edge")>-1?i.browser="edge":e.indexOf("opr")>-1?i.browser="opera":e.indexOf("chrome")>-1?i.browser="chrome":e.indexOf("firefox")>-1?i.browser="firefox":e.indexOf("safari")>-1?i.browser="safari":i.browser="unknown",$.inArray(n,r)>-1?i.platform="pc":i.platform="mobile",i}function _removeDuplicate(e){var n=[],r=_typeOf(e);"string"==r||"number"==r||"boolean"==r?e=$.makeArray(e):"array"!=r&&(e=[]);for(var i in e)-1==$.inArray(e[i],n)&&n.push(e[i]);return n}var _$window=$(window),_$document=$(document),_isWindowLoad=!1,_windowTempWidth=0,_windowTempHeight=0,_connectedState=_getConnectedState(),_range={},_rangeCode="",_rangeProperty=[],_timeout=0,_interval=0,_JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var e=Object.prototype.toString,n=Array.isArray||function(n){return"[object Array]"===e.call(n)},r={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},i=function(e){return r[e]||"\\u"+(e.charCodeAt(0)+65536).toString(16).substr(1)},o=/[\\"\u0000-\u001F\u2028\u2029]/g;return function t(r){if(null==r)return"null";if("number"==typeof r)return isFinite(r)?r.toString():"null";if("boolean"==typeof r)return r.toString();if("object"==typeof r){if("function"==typeof r.toJSON)return t(r.toJSON());if(n(r)){for(var s="[",a=0;a<r.length;a++)s+=(a?", ":"")+t(r[a]);return s+"]"}if("[object Object]"===e.call(r)){var l=[];for(var _ in r)r.hasOwnProperty(_)&&l.push(t(_)+": "+t(r[_]));return"{"+l.join(", ")+"}"}}return'"'+r.toString().replace(o,i)+'"'}}()};_$document.on("ready.responsive",function(){function _hasScrollbar(e){var n=$(e).first(),r=n.add(n.parents()),i=[],o=[],t={horizontal:!1,vertical:!1};return r.each(function(e,n){var r=$(n),t={x:r.css("overflow-x"),y:r.css("overflow-y")};n.scrollWidth>n.clientWidth&&"hidden"!=t.x||"scroll"==t.x?i.push(!0):i.push(!1),n.scrollHeight>n.clientHeight&&"hidden"!=t.y||"scroll"==t.y?o.push(!0):o.push(!1)}),$.inArray(!0,i)>-1&&(t.horizontal=!0),$.inArray(!0,o)>-1&&(t.vertical=!0),t}function _getScrollbarWidth(){var e=$("body"),n=e.children("#responsive_scrollbar"),r=n.length?n[0].offsetWidth-n[0].clientWidth:0;return n.length||(e.append('<div id="responsive_scrollbar" style="visibility:hidden; overflow:scroll; position:absolute; top:-100px; left:-100px; z-index:-1; width:100px; height:100px;">&nbsp;</div>'),r=_getScrollbarWidth()),r}function _getDefaultObject(){var e=_hasScrollbar(_$target[0]),n=_getScrollbarWidth(),r=e.vertical?_$window.width()+n:_$window.width(),i=e.horizontal?_$window.height()+n:_$window.height(),o={isRun:!1,enter:[],exit:[],nowState:[],prevState:[],lowIERange:[],scrollbarWidth:n,windowWidth:r,windowHeight:i,windowLoadedWidth:r,windowLoadedHeight:i,browser:_connectedState.browser,platform:_connectedState.platform,hasVerticalScrollbar:e.vertical,hasHorizontalScrollbar:e.horizontal,isLowIE:"ie7"==_connectedState.browser||"ie8"==_connectedState.browser,lowIERun:!1,isScreenChange:!1,isScreenWidthChange:!1,isScreenHeightChange:!1,isScreenWidthAndHeightChange:!1};return $("body > #responsive_scrollbar").remove(),_freeObject(o)}function _setState(e){var n=!1,r=[],i=[];e=_removeDuplicate(e);for(var o in e)-1==$.inArray(e[o],_responsive.nowState)?r.push(e[o]):i.push(e[o]);return r.length&&(n=!0),n&&(_$target.removeClass(i.join(" ")),_$target.addClass(e.join(" ")),_responsive.prevState=i,_responsive.nowState=e,console.log("현재상태 : "+e.join(", "))),_callEvent((e.join("All, ")+"All").split(", ")),n&&_callEvent(e),n}function _callEvent(e){var n={responsive:_freeObject(_responsive)};e=_removeDuplicate(e),$.responsive.setting=n.responsive;for(var r in e)n.state=e[r],_$window.triggerHandler($.Event("responsive",n)),_$window.triggerHandler($.Event("responsive:"+e[r],n));return e}function _setScreenInfo(){var e=_hasScrollbar(_$target[0]);return _responsive.hasVerticalScrollbar=e.vertical,_responsive.hasHorizontalScrollbar=e.horizontal,_responsive.scrollbarWidth=_getScrollbarWidth(),_responsive.scrollbarWidth?_$target.addClass("scrollbar"):_$target.removeClass("scrollbar"),_responsive.windowWidth=_$window.width(),_responsive.windowHeight=_$window.height(),_responsive.hasVerticalScrollbar&&(_responsive.windowWidth+=_responsive.scrollbarWidth),_responsive.hasHorizontalScrollbar&&(_responsive.windowHeight+=_responsive.scrollbarWidth),_responsive}var _$target=$("body"),_responsive=_getDefaultObject();$.responsive=function(option){if(_responsive.isRun||!_isWindowLoad)throw"이미 실행 중 이거나 윈도우가 로드되지 않았습니다.";_responsive.isRun=!0,_$target.addClass(_responsive.browser+" "+_responsive.platform),"object"!=_typeOf(option)&&(option={}),"boolean"==_typeOf(option.lowIERun)?_responsive.lowIERun=option.lowIERun:_responsive.lowIERun=!1;var typeofLowIERange=_typeOf(option.lowIERange);"array"==typeofLowIERange||"string"==typeofLowIERange?_responsive.lowIERange=_removeDuplicate(option.lowIERange):_responsive.lowIERange=["web"],_interval="number"==_typeOf(option.interval)?option.interval:250,_range="object"==_typeOf(option.range)?option.range:{wide:{from:9999,to:1201},web:{from:1200,to:801},tablet:{from:800,to:641},phone:{from:640,to:0}},_rangeCode="_responsive.enter = [];\n_responsive.exit = [];\n\n",_rangeCode+="if(!_responsive.lowIERun && _responsive.isLowIE) {\n	_responsive.enter = _responsive.lowIERange;\n}else{\n";var i;for(i in _range)i=i.toLowerCase(),"resized"!=i.substr(-7)&&"none"!=i.substr(-4)&&"all"!=i.substr(-3)&&"mobile"!=i&&"pc"!=i&&"scrollbar"!=i&&"ie7"!=i&&"ie8"!=i&&"ie9"!=i&&"ie10"!=i&&"ie11"!=i&&"edge"!=i&&"whale"!=i&&"samsung"!=i&&"opera"!=i&&"chrome"!=i&&"firefox"!=i&&"safari"!=i&&"unknown"!=i&&(_rangeProperty.push(i),_range[i].from&&"number"==_typeOf(_range[i].from)||(_range[i].from=9999),_range[i].to&&"number"==_typeOf(_range[i].to)||(_range[i].to=0),_rangeCode+='	if(_responsive.windowWidth <= _range["'+i+'"].from && _responsive.windowWidth >= _range["'+i+'"].to) {\n',_rangeCode+='		_responsive.enter.push("'+i+'");\n',_rangeCode+="	}else{\n",_rangeCode+='		_responsive.exit.push("'+i+'");\n',_rangeCode+="	}\n\n");_rangeCode+="}";for(i in _responsive.lowIERange)-1==$.inArray(_responsive.lowIERange[i],_rangeProperty)&&(_responsive.lowIERange[i]="none");return 1==_responsive.lowIERange.length&&"none"==_responsive.lowIERange[0]?_responsive.lowIERange=["none"]:_responsive.lowIERange=_responsive.lowIERange.join(", ").replace(/, none/g,"").split(", "),_$window.on("resize.responsive",function(event){_responsive.isScreenChange=!1,_responsive.isScreenWidthChange=!1,_responsive.isScreenHeightChange=!1,_responsive.isScreenWidthAndHeightChange=!1,_setScreenInfo(),_responsive.windowWidth!=_windowTempWidth&&(_windowTempWidth=_responsive.windowWidth,_responsive.isScreenWidthChange=!0),_responsive.windowHeight!=_windowTempHeight&&(_windowTempHeight=_responsive.windowHeight,_responsive.isScreenHeightChange=!0),_responsive.isScreenWidthChange&&_responsive.isScreenHeightChange&&(_responsive.isScreenWidthAndHeightChange=!0),(_responsive.isScreenWidthChange||_responsive.isScreenHeightChange)&&(_responsive.isScreenChange=!0),_responsive.isScreenWidthChange&&(_responsive.isResize=!0,_callEvent("all"),eval(_rangeCode),_setState(_responsive.enter.length?_responsive.enter:"none"),_timeout&&(clearTimeout(_timeout),_timeout=0),_timeout=setTimeout(function(){_responsive.isResize=!1,_setScreenInfo(),_callEvent("allResized"),_callEvent(_responsive.enter.length?(_responsive.enter.join("AllResized, ")+"AllResized").split(", "):"noneAllResized")},_interval))}).triggerHandler("resize.responsive"),this},$.responsive.destroy=function(){var e=!1;return _responsive.isRun&&(_$window.off("resize.responsive"),_$target.removeClass("scrollbar "+_responsive.browser+" "+_responsive.platform+" "+_responsive.nowState.join(" ")),_responsive=_getDefaultObject(),_windowTempWidth=0,_windowTempHeight=0,this.setting=void 0,e=!0),e},$.responsive.setting=_freeObject(_responsive)}),_$window.on("load.responsive",function(e){_isWindowLoad=!0})}(jQuery)}catch(e){console.error(e)}