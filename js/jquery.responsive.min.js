"use strict";

/**
 * @name responsive
 * @author JungHyunKwon
 * @since 2017-11-03
 * @version 1.0
 */
try{if(!window.console){window.console={method:["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],comment:[]};for(var i=0;i<console.method.length;i++)window.console[window.console.method[i]]||(window.console[window.console.method[i]]=function(e){this.comment.push(e)})}if(window.JSON=window.JSON||{parse:function(sJSON){var result;try{result=eval("("+sJSON+")")}catch(e){result={}}return result},stringify:function(){var e=Object.prototype.toString,t=Array.isArray||function(t){return"[object Array]"===e.call(t)},n={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t"},i=function(e){return n[e]||"\\u"+(e.charCodeAt(0)+65536).toString(16).substr(1)},o=/[\\"\u0000-\u001F\u2028\u2029]/g;return function n(r){if(null==r)return"null";if("number"==typeof r)return isFinite(r)?r.toString():"null";if("boolean"==typeof r)return r.toString();if("object"==typeof r){if("function"==typeof r.toJSON)return n(r.toJSON());if(t(r)){for(var s="[",a=0;a<r.length;a++)s+=(a?", ":"")+n(r[a]);return s+"]"}if("[object Object]"===e.call(r)){var g=[];for(var l in r)r.hasOwnProperty(l)&&g.push(n(l)+" : "+n(r[l]));return"{"+g.join(", ")+"}"}}return'"'+r.toString().replace(o,i)+'"'}}()},!window.jQuery)throw"제이쿼리가 없습니다.";!function($){function getTypeof(e){var t="none";if(arguments.length)if(t=Object.prototype.toString.call(e).toLowerCase().replace("[object ","").replace("]",""),void 0===e)t="undefined";else if("number"===t&&isNaN(e))t="NaN";else if("number"!==t||isFinite(e))if("document"===t.substr(-8))t="document";else if("element"===t.substr(-7))t="element";else if("function"==typeof window.jQuery&&e instanceof window.jQuery){var n=0;for(var i in e){var o=getTypeof(e[i]);"window"!==o&&"document"!==o&&"element"!==o||isNaN(Number(i))||n++}t=e.length&&e.length===n?"jQueryElement":"jQueryObject"}else"date"===t&&isNaN(new Date(e))?t="Invalid Date":"function"===t&&/^class\s/.test(Function.prototype.toString.call(e))&&(t="class");else t="Infinity";return t}function freeObject(e){var t={};return"object"==getTypeof(e)&&(t=JSON.parse(JSON.stringify(e))),t}function getConnectedState(){var e=navigator.userAgent.toLowerCase(),t=navigator.platform.toLowerCase(),n=["win16","win32","win64","mac","linux"],i={};return e.indexOf("msie 7.0")>-1?i.browser="ie7":e.indexOf("msie 8.0")>-1?i.browser="ie8":e.indexOf("msie 9.0")>-1?i.browser="ie9":e.indexOf("msie 10.0")>-1?i.browser="ie10":e.indexOf("trident/7.0")>-1?i.browser="ie11":e.indexOf("edge")>-1?i.browser="edge":e.indexOf("opr")>-1?i.browser="opera":e.indexOf("chrome")>-1?i.browser="chrome":e.indexOf("firefox")>-1?i.browser="firefox":e.indexOf("safari")>-1?i.browser="safari":i.browser="unknown",$.inArray(t,n)>-1?i.platform="pc":i.platform="mobile",i}function removeDuplicate(e){var t=[];"array"!=getTypeof(e)&&(e=$.makeArray(e));for(var n=0;n<e.length;n++)-1==$.inArray(e[n],t)&&t.push(e[n]);return t}var $window=$(window),connectedState=getConnectedState(),setting={};$(function(){function hasScrollbar(e){var t=$(e).first(),n=[],i=[],o={horizontal:!1,vertical:!1};return t.add(t.parents()).each(function(e,t){var o=$(t),r={x:o.css("overflow-x"),y:o.css("overflow-y")};t.scrollWidth>t.clientWidth&&"hidden"!=r.x||"scroll"==r.x?n.push(!0):n.push(!1),t.scrollHeight>t.clientHeight&&"hidden"!=r.y||"scroll"==r.y?i.push(!0):i.push(!1)}),$.inArray(!0,n)>-1&&(o.horizontal=!0),$.inArray(!0,i)>-1&&(o.vertical=!0),o}function getScrollbarWidth(){var e={visibility:"hidden",overflowX:"scroll",overflowY:"scroll",position:"absolute",top:"-100px",left:"-100px",zIndex:"-1",width:"100px",height:"100px"},t=$("body"),n=t.children("#responsive_scrollbar"),i=n.length?n.removeAttr("style").css(e)[0].offsetWidth-n[0].clientWidth:0;return n.length||(t.append('<div id="responsive_scrollbar">&nbsp;</div>'),i=getScrollbarWidth()),i}function getDefaultObject(){var e=hasScrollbar($target[0]),t=getScrollbarWidth(),n=e.vertical?$window.width()+t:$window.width(),i=e.horizontal?$window.height()+t:$window.height();return freeObject({isRun:!1,range:{},rangeProperty:[],exit:[],lowIE:{is:"ie7"==connectedState.browser||"ie8"==connectedState.browser,property:[],run:!0},nowState:[],prevState:[],scrollbarWidth:t,orientation:n==i?"square":n>i?"landscape":"portrait",screenWidth:n,screenHeight:i,loadedScreenWidth:n,loadedScreenHeight:i,browser:connectedState.browser,platform:connectedState.platform,hasVerticalScrollbar:e.vertical,hasHorizontalScrollbar:e.horizontal,isResize:!1,triggerType:"",isScreenChange:!1,isScreenWidthChange:!1,isScreenHeightChange:!1,isScreenWidthAndHeightChange:!1,inheritClass:{property:[],is:!1}})}function setState(e){var t,n=!1,i=[],o=[],r=[];for(e=removeDuplicate(e),t=0;t<e.length;t++)-1==$.inArray(e[t],setting.nowState)?i.push(e[t]):o.push(e[t]);if((i.length||o.length!=setting.nowState.length)&&(n=!0),n){if($target.removeClass(setting.nowState.join(" ")),$target.addClass(e.join(" ")),setting.prevState=setting.nowState,setting.nowState=e,setting.inheritClass.is)for(setting.inheritClass.property=[],t=0;t<$.inArray(setting.nowState[setting.nowState.length-1],setting.rangeProperty);t++)-1==$.inArray(setting.rangeProperty[t],setting.nowState)&&($target.hasClass(setting.rangeProperty[t])||r.push(setting.rangeProperty[t]),setting.inheritClass.property.push(setting.rangeProperty[t]));$target.addClass(r.join(" ")),console.log("현재상태 : "+e.join(", "))}return callEvent((e.join("All, ")+"All").split(", ")),n&&callEvent(e),n}function callEvent(e){var t=$.Event("responsive",{setting:freeObject(setting)});e=removeDuplicate(e),$.responsive.setting=t.setting;for(var n=0;n<e.length;n++)t.state=e[n],$window.triggerHandler(t),t.type="responsive:"+e[n],$window.triggerHandler(t);return e}function setScreenInfo(e){var t=hasScrollbar($target[0]);return 2==e.isTrigger?setting.triggerType="triggerHandler":3==e.isTrigger?setting.triggerType="trigger":setting.triggerType="",setting.hasVerticalScrollbar=t.vertical,setting.hasHorizontalScrollbar=t.horizontal,setting.isResize=!1,setting.isScreenWidthChange=!1,setting.isScreenHeightChange=!1,setting.isScreenWidthAndHeightChange=!1,setting.isScreenChange=!1,setting.scrollbarWidth=getScrollbarWidth(),setting.scrollbarWidth?$target.addClass("scrollbar"):$target.removeClass("scrollbar"),setting.screenWidth=$window.width(),setting.screenHeight=$window.height(),setting.hasVerticalScrollbar&&(setting.screenWidth+=setting.scrollbarWidth),setting.hasHorizontalScrollbar&&(setting.screenHeight+=setting.scrollbarWidth),$target.removeClass(setting.orientation),setting.screenWidth==setting.screenHeight?setting.orientation="square":setting.screenWidth>setting.screenHeight?setting.orientation="landscape":setting.orientation="portrait",$target.addClass(setting.orientation),setting}var $target=$("body"),initialSetting=getDefaultObject();$.responsive=function(option){setting.nowState&&setting.nowState.length&&$target.removeClass(setting.nowState.join(" ")),setting.inheritClass&&setting.inheritClass.property&&setting.inheritClass.property.length&&$target.removeClass(setting.inheritClass.property.join(" ")),setting=getDefaultObject(),setting.isRun=!0,$target.addClass(setting.browser+" "+setting.platform),"object"!=getTypeof(option)&&(option={}),"object"!=getTypeof(option.lowIE)&&(option.lowIE={}),option.lowIEPropertyType=getTypeof(option.lowIE.property),"array"==option.lowIEPropertyType||"string"==option.lowIEPropertyType?option.lowIE.property=removeDuplicate(option.lowIE.property):option.lowIE.property=[],"boolean"!=getTypeof(option.inheritClass)&&(option.inheritClass=!1),setting.inheritClass.is=option.inheritClass,option.interval=250,"object"!=getTypeof(option.range)&&(option.range={}),option.rangeCode="option.enter = [];\nsetting.exit = [];\n\n",option.rangeCode+="if(!setting.lowIE.run && setting.lowIE.is) {\n\toption.enter = setting.lowIE.property;\n}else{\n",option.rangeFilter=[],option.rangeProperty=[];for(option.i in option.range)"square"!=option.i&&"portrait"!=option.i&&"landscape"!=option.i&&"All"!=option.i.substr(-3)&&"Resized"!=option.i.substr(-7)&&"none"!=option.i&&"all"!=option.i.substr(-3)&&"mobile"!=option.i&&"pc"!=option.i&&"scrollbar"!=option.i&&"ie7"!=option.i&&"ie8"!=option.i&&"ie9"!=option.i&&"ie10"!=option.i&&"ie11"!=option.i&&"edge"!=option.i&&"opera"!=option.i&&"chrome"!=option.i&&"firefox"!=option.i&&"safari"!=option.i&&"unknown"!=option.i?(option.hasRangeHorizontal="object"==getTypeof(option.range[option.i].horizontal),option.hasRangeVertical="object"==getTypeof(option.range[option.i].vertical),(option.hasRangeHorizontal||option.hasRangeVertical)&&(option.hasRangeHorizontal&&"number"==getTypeof(option.range[option.i].horizontal.from)&&"number"==getTypeof(option.range[option.i].horizontal.to)?option.rangeFilter.push(!0):option.rangeFilter.push(!1),option.hasRangeVertical&&"number"==getTypeof(option.range[option.i].vertical.from)&&"number"==getTypeof(option.range[option.i].vertical.to)?option.rangeFilter.push(!0):option.rangeFilter.push(!1),option.rangeFilter[0]||option.rangeFilter[1]?(option.rangeCode+="\tif(",option.rangeFilter[0]&&(option.rangeCode+="setting.screenWidth <= "+option.range[option.i].horizontal.from+" && setting.screenWidth >= "+option.range[option.i].horizontal.to),option.rangeFilter[1]&&(option.hasRangeHorizontal&&(option.rangeCode+=" && "),option.rangeCode+="setting.screenHeight <= "+option.range[option.i].vertical.from+" && setting.screenHeight >= "+option.range[option.i].vertical.to),option.rangeCode+=") {\n",option.rangeCode+='\t\toption.enter.push("'+option.i+'");\n',option.rangeCode+="\t}else{\n",option.rangeCode+='\t\tsetting.exit.push("'+option.i+'");\n',option.rangeCode+="\t}\n\n",option.rangeProperty.push(option.i)):delete option.range[option.i],option.rangeFilter=[])):delete option.range[option.i];for(option.rangeCode=option.rangeCode.replace(/\n$/,""),option.rangeCode+="}",setting.range=option.range,setting.rangeProperty=option.rangeProperty,option.i=0,option.lowIEFilter=[];option.i<option.lowIE.property.length;option.i++)$.inArray(option.lowIE.property[option.i],option.rangeProperty)>-1&&option.lowIEFilter.push(option.lowIE.property[option.i]);return option.lowIEFilter.length?option.lowIE.run=!1:option.lowIE.run=!0,setting.lowIE.run=option.lowIE.run,option.lowIE.property=option.lowIEFilter,setting.lowIE.property=option.lowIE.property,$window.off("resize.responsive").on("resize.responsive",function(event){setScreenInfo(event),setting.isResize=!0,setting.screenWidth!=option.screenWidth&&(option.screenWidth=setting.screenWidth,setting.isScreenWidthChange=!0),setting.screenHeight!=option.screenHeight&&(option.screenHeight=setting.screenHeight,setting.isScreenHeightChange=!0),setting.isScreenWidthChange&&setting.isScreenHeightChange&&(setting.isScreenWidthAndHeightChange=!0),(setting.isScreenWidthChange||setting.isScreenHeightChange)&&(setting.isScreenChange=!0),setting.triggerType&&(setting.isResize=!1,setting.isScreenWidthChange=!1,setting.isScreenHeightChange=!1,setting.isScreenWidthAndHeightChange=!1,setting.isScreenChange=!1),(setting.isScreenChange||setting.triggerType)&&(callEvent("all"),eval(option.rangeCode),setState(option.enter.length?option.enter:"none"),option.timer&&(clearTimeout(option.timer),option.timer=0),option.timer=setTimeout(function(){setScreenInfo(event),callEvent("allResized"),callEvent(option.enter.length?(option.enter.join("AllResized, ")+"AllResized").split(", "):"noneAllResized"),setting.triggerType&&(setting.triggerType="",$.responsive.setting=freeObject(setting))},option.interval))}).triggerHandler("resize.responsive"),$target},$.responsive.destroy=function(){var e=!1;return setting.isRun&&($window.off("resize.responsive"),$target.removeClass("scrollbar "+setting.browser+" "+setting.platform+" "+setting.nowState.join(" ")+" "+setting.orientation+" "+setting.inheritClass.property.join(" ")),$("body > #responsive_scrollbar").remove(),this.setting=freeObject(initialSetting),e=!0,setting.isRun=!1),e},$.responsive.setting=freeObject(initialSetting)})}(jQuery)}catch(e){console.error(e)}