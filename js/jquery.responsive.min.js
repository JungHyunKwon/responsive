"use strict";

/**
 * @name responsive
 * @author JungHyunKwon
 * @since 2017-11-03
 * @version 1.0
 */
try{if(this.jQuery=this.jQuery||void 0,!jQuery)throw"제이쿼리가 없습니다.";!function($){function _typeOf(e){var r="";return r=void 0===e?"undefined":"number"==typeof e&&isNaN(e)?"NaN":Object.prototype.toString.call(e).toLowerCase().replace("[object ","").replace("]","")}function _freeObject(e){var r={};return"object"==_typeOf(e)&&(r=_JSON.parse(_JSON.stringify(e))),r}function _getConnectedState(){var e=navigator.userAgent.toLowerCase(),r=navigator.platform.toLowerCase(),i=["win16","win32","win64","mac","linux"],n={browser:"",platform:""};return e.indexOf("msie 7.0")>-1?n.browser="ie7":e.indexOf("msie 8.0")>-1?n.browser="ie8":e.indexOf("msie 9.0")>-1?n.browser="ie9":e.indexOf("msie 10.0")>-1?n.browser="ie10":e.indexOf("trident/7.0")>-1?n.browser="ie11":e.indexOf("edge")>-1?n.browser="edge":e.indexOf("opr")>-1?n.browser="opera":e.indexOf("chrome")>-1?n.browser="chrome":e.indexOf("firefox")>-1?n.browser="firefox":e.indexOf("safari")>-1?n.browser="safari":n.browser="unknown",$.inArray(r,i)>-1?n.platform="pc":n.platform="mobile",n}function _removeDuplicate(e){var r=[],i=_typeOf(e);"string"==i||"number"==i||"boolean"==i?e=$.makeArray(e):"array"!=i&&(e=[]);for(var n=0;n<e.length;n++)-1==$.inArray(e[n],r)&&r.push(e[n]);return r}var _$window=$(window),_timestamp=(new Date).getTime(),_connectedState=_getConnectedState(),_JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var e=Object.prototype.toString,r=Array.isArray||function(r){return"[object Array]"===e.call(r)},i={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},n=function(e){return i[e]||"\\u"+(e.charCodeAt(0)+65536).toString(16).substr(1)},o=/[\\"\u0000-\u001F\u2028\u2029]/g;return function t(i){if(null==i)return"null";if("number"==typeof i)return isFinite(i)?i.toString():"null";if("boolean"==typeof i)return i.toString();if("object"==typeof i){if("function"==typeof i.toJSON)return t(i.toJSON());if(r(i)){for(var s="[",a=0;a<i.length;a++)s+=(a?", ":"")+t(i[a]);return s+"]"}if("[object Object]"===e.call(i)){var l=[];for(var p in i)i.hasOwnProperty(p)&&l.push(t(p)+" : "+t(i[p]));return"{"+l.join(", ")+"}"}}return'"'+i.toString().replace(o,n)+'"'}}()};$(function(){function _hasScrollbar(e){var r=$(e).first(),i=r.add(r.parents()),n=[],o=[],t={horizontal:!1,vertical:!1};return i.each(function(e,r){var i=$(r),t={x:i.css("overflow-x"),y:i.css("overflow-y")};r.scrollWidth>r.clientWidth&&"hidden"!=t.x||"scroll"==t.x?n.push(!0):n.push(!1),r.scrollHeight>r.clientHeight&&"hidden"!=t.y||"scroll"==t.y?o.push(!0):o.push(!1)}),$.inArray(!0,n)>-1&&(t.horizontal=!0),$.inArray(!0,o)>-1&&(t.vertical=!0),t}function _getScrollbarWidth(){var e=$("body"),r=e.children("#responsive_scrollbar"),i=r.data(),n=r.length?r[0].offsetWidth-r[0].clientWidth:0;return i||(i={timestamp:void 0}),i.timestamp!=_timestamp&&(r.remove(),e.append('<div id="responsive_scrollbar" style="visibility:hidden; overflow-x:scroll; overflow-y:scroll; position:absolute; top:-100px; left:-100px; z-index:-1; width:100px; height:100px;"  data-timestamp="'+_timestamp+'">&nbsp;</div>'),_getScrollbarWidth()),n}function _getDefaultObject(){var e=_hasScrollbar(_$target[0]),r=_getScrollbarWidth(),i=e.vertical?_$window.width()+r:_$window.width(),n=e.horizontal?_$window.height()+r:_$window.height(),o={isRun:!1,exit:[],nowState:[],prevState:[],lowIERun:!1,scrollbarWidth:r,windowWidth:i,windowHeight:n,windowLoadedWidth:i,windowLoadedHeight:n,browser:_connectedState.browser,platform:_connectedState.platform,hasVerticalScrollbar:e.vertical,hasHorizontalScrollbar:e.horizontal,isLowIE:"ie7"==_connectedState.browser||"ie8"==_connectedState.browser,isScreenChange:!1,isScreenWidthChange:!1,isScreenHeightChange:!1,isScreenWidthAndHeightChange:!1};return _freeObject(o)}function _setState(e){var r=!1,i=[];e=_removeDuplicate(e);for(var n=0;n<e.length;n++)-1==$.inArray(e[n],_responsive.nowState)&&i.push(e[n]);return i.length&&(r=!0),r&&(_$target.removeClass(_responsive.nowState.join(" ")),_$target.addClass(e.join(" ")),_responsive.prevState=_responsive.nowState,_responsive.nowState=e,console.log("현재상태 : "+e.join(", "))),_callEvent((e.join("All, ")+"All").split(", ")),r&&_callEvent(e),r}function _callEvent(e){var r={responsive:_freeObject(_responsive)};e=_removeDuplicate(e),$.responsive.setting=r.responsive;for(var i=0;i<e.length;i++)r.state=e[i],_$window.triggerHandler($.Event("responsive",r)),_$window.triggerHandler($.Event("responsive:"+e[i],r));return e}function _setScreenInfo(){var e=_hasScrollbar(_$target[0]);return _responsive.hasVerticalScrollbar=e.vertical,_responsive.hasHorizontalScrollbar=e.horizontal,_responsive.scrollbarWidth=_getScrollbarWidth(),_responsive.scrollbarWidth?_$target.addClass("scrollbar"):_$target.removeClass("scrollbar"),_responsive.windowWidth=_$window.width(),_responsive.windowHeight=_$window.height(),_responsive.hasVerticalScrollbar&&(_responsive.windowWidth+=_responsive.scrollbarWidth),_responsive.hasHorizontalScrollbar&&(_responsive.windowHeight+=_responsive.scrollbarWidth),_responsive}var _$target=$("body"),_responsive={};$.responsive=function(option){var windowTempWidth=0,windowTempHeight=0,i="",lowIEStateType=_typeOf(option.lowIE.state),rangeCode="",rangeProperty=[],enter=[];_responsive=_getDefaultObject(),_responsive.isRun=!0,_$target.addClass(_responsive.browser+" "+_responsive.platform),"object"!=_typeOf(option)&&(option={}),"object"!=_typeOf(option.lowIE)&&(option.lowIE={}),"boolean"==_typeOf(option.lowIE.run)&&(_responsive.lowIERun=option.lowIE.run),"array"==lowIEStateType||"string"==lowIEStateType?option.lowIE.state=_removeDuplicate(option.lowIE.state):option.lowIE.state=[],"number"!=_typeOf(option.interval)&&(option.interval=250),"object"!=_typeOf(option.range)&&(option.range={});for(i in option.range)i=i.toLowerCase(),"resized"!=i.substr(-7)&&"none"!=i.substr(-4)&&"all"!=i.substr(-3)&&"mobile"!=i&&"pc"!=i&&"scrollbar"!=i&&"ie7"!=i&&"ie8"!=i&&"ie9"!=i&&"ie10"!=i&&"ie11"!=i&&"edge"!=i&&"whale"!=i&&"samsung"!=i&&"opera"!=i&&"chrome"!=i&&"firefox"!=i&&"safari"!=i&&"unknown"!=i&&(rangeProperty.push(i),"object"!=_typeOf(option.range[i])&&(option.range[i]={}),"number"!=_typeOf(option.range[i].from)&&(option.range[i].from=9999),"number"!=_typeOf(option.range[i].to)&&(option.range[i].to=0),rangeCode+="	if(_responsive.windowWidth <= "+option.range[i].from+" && _responsive.windowWidth >= "+option.range[i].to+") {\n",rangeCode+='		enter.push("'+i+'");\n',rangeCode+="	}else{\n",rangeCode+='		_responsive.exit.push("'+i+'");\n',rangeCode+="	}\n\n");for(rangeCode+="}",i=0;i<option.lowIE.state.length;i++)-1==$.inArray(option.lowIE.state[i],rangeProperty)&&(option.lowIE.state[i]="none");return option.lowIE.state=option.lowIE.state.join(", ").replace(/, none/g,"").split(", "),rangeCode='enter = [];\n_responsive.exit = [];\n\nif(!_responsive.lowIERun && _responsive.isLowIE) {\n	enter = ["'+option.lowIE.state.join('", "')+'"];\n}else{\n'+rangeCode,_$window.off("resize.responsive").on("resize.responsive",function(event){_responsive.isScreenChange=!1,_responsive.isScreenWidthChange=!1,_responsive.isScreenHeightChange=!1,_responsive.isScreenWidthAndHeightChange=!1,_setScreenInfo(),_responsive.windowWidth!=windowTempWidth&&(windowTempWidth=_responsive.windowWidth,_responsive.isScreenWidthChange=!0),_responsive.windowHeight!=windowTempHeight&&(windowTempHeight=_responsive.windowHeight,_responsive.isScreenHeightChange=!0),_responsive.isScreenWidthChange&&_responsive.isScreenHeightChange&&(_responsive.isScreenWidthAndHeightChange=!0),(_responsive.isScreenWidthChange||_responsive.isScreenHeightChange)&&(_responsive.isScreenChange=!0),_responsive.isScreenWidthChange&&(_responsive.isResize=!0,_callEvent("all"),eval(rangeCode),_setState(enter.length?enter:"none"),option.timer&&(clearTimeout(option.timer),option.timer=0),option.timer=setTimeout(function(){_responsive.isResize=!1,_setScreenInfo(),_callEvent("allResized"),_callEvent(enter.length?(enter.join("AllResized, ")+"AllResized").split(", "):"noneAllResized")},option.interval))}).triggerHandler("resize.responsive"),_$target},$.responsive.destroy=function(){var e=!1;return _responsive.isRun&&(_$window.off("resize.responsive"),_$target.removeClass("scrollbar "+_responsive.browser+" "+_responsive.platform+" "+_responsive.nowState.join(" ")),$("body > #responsive_scrollbar").remove(),this.setting=void 0,e=!0),e},$.responsive.setting=_getDefaultObject()})}(jQuery)}catch(e){console.error(e)}